# 基础镜像构建 - 包含Node.js环境和项目依赖
FROM node:18-alpine AS base

# 设置工作目录
WORKDIR /app

# 复制package文件
COPY package.json pnpm-lock.yaml ./

# 安装pnpm
RUN npm install -g pnpm

# 安装项目依赖
RUN pnpm install --frozen-lockfile

# 设置标签信息
LABEL maintainer="your-team@company.com"
LABEL description="IDCcmdb项目基础镜像 - 包含Node.js环境和项目依赖"
LABEL version="1.0.0"

# 暴露端口（可选，用于开发调试）
EXPOSE 3000

# 默认命令（用于开发环境）
CMD ["pnpm", "start"]